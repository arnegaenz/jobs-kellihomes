<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kelli Homes | Wasteland</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="kh-header">
      <div class="kh-container kh-header__inner">
        <a class="kh-logo-link" href="index.html">
          <img src="assets/kh-logo.png" alt="Kelli Homes" class="kh-logo" />
        </a>
        <nav class="kh-nav">
          <a href="index.html">Dashboard</a>
          <a href="tasks.html">Tasks</a>
          <a href="documents.html">Documents</a>
          <a href="wasteland.html" class="is-active">Wasteland</a>
        </nav>
        <div class="kh-user">
          <span id="signed-in-user">Signed in as â€”</span>
          <a href="change-password.html" class="kh-link" style="margin-left: 12px;">Change Password</a>
          <button class="kh-link" id="logout-button" style="margin-left: 12px; cursor: pointer; background: none; border: none; font: inherit;">Logout</button>
        </div>
      </div>
    </header>

    <section class="kh-login" id="login-panel" hidden>
      <div class="kh-login__card">
        <img src="assets/kh-logo.png" alt="Kelli Homes" class="kh-login__logo" />
        <h1 class="kh-login__title">Job Management</h1>
        <p class="kh-login__subtitle">Sign in to view and manage active projects.</p>
        <form class="kh-login__form" id="login-form">
          <label class="kh-field">
            <span>User ID</span>
            <input class="kh-input" name="username" autocomplete="username" required />
          </label>
          <label class="kh-field">
            <span>Password</span>
            <input class="kh-input" name="password" type="password" autocomplete="current-password" required />
          </label>
          <button class="kh-button" type="submit">Sign in</button>
          <div class="kh-form-message" id="login-message"></div>
        </form>
      </div>
    </section>

    <main class="kh-main" id="main-content">
      <div class="kh-container">
        <section class="kh-hero kh-wasteland-hero">
          <div class="kh-wasteland-hero__icon">
            <svg width="52" height="52" viewBox="0 0 52 52" fill="none" xmlns="http://www.w3.org/2000/svg">
              <!-- Radiation/salvage circle -->
              <circle cx="26" cy="26" r="23" fill="#d4a574" opacity="0.1" stroke="#8b6914" stroke-width="1.5" stroke-dasharray="4 3"/>
              <!-- Stacked crates -->
              <rect x="10" y="28" width="14" height="12" rx="1.5" fill="#c28152" opacity="0.25" stroke="#8b6914" stroke-width="1.8"/>
              <line x1="13" y1="28" x2="13" y2="40" stroke="#8b6914" stroke-width="1" opacity="0.4"/>
              <line x1="21" y1="28" x2="21" y2="40" stroke="#8b6914" stroke-width="1" opacity="0.4"/>
              <line x1="10" y1="34" x2="24" y2="34" stroke="#8b6914" stroke-width="1" opacity="0.4"/>
              <!-- Tilted crate on top -->
              <rect x="12" y="17" width="11" height="10" rx="1.5" fill="#c28152" opacity="0.2" stroke="#8b6914" stroke-width="1.8" transform="rotate(-8 17.5 22)"/>
              <!-- Loose pipe/beam -->
              <line x1="28" y1="14" x2="42" y2="38" stroke="#8b6914" stroke-width="2.5" stroke-linecap="round" opacity="0.5"/>
              <line x1="30" y1="14" x2="44" y2="38" stroke="#8b6914" stroke-width="1.2" stroke-linecap="round" opacity="0.3"/>
              <!-- Salvage star -->
              <path d="M36 20l1.5 3 3.5.5-2.5 2.5.6 3.5L36 28l-3.1 1.5.6-3.5L31 23.5l3.5-.5z" fill="#8b6914" opacity="0.3" stroke="#8b6914" stroke-width="1"/>
            </svg>
          </div>
          <div class="kh-wasteland-hero__text">
            <h1 class="kh-hero__title kh-wasteland-hero__title">THE WASTELAND</h1>
            <p class="kh-wasteland-hero__tagline">SALVAGE &middot; TRACK &middot; REUSE</p>
            <p class="kh-hero__subtitle">Every leftover has a second life. Find it here before you buy new.</p>
          </div>
          <button class="kh-button kh-wasteland-hero__btn" id="add-inventory-button">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" style="vertical-align: -2px; margin-right: 4px;"><path d="M8 2a1 1 0 011 1v4h4a1 1 0 110 2H9v4a1 1 0 11-2 0V9H3a1 1 0 110-2h4V3a1 1 0 011-1z"/></svg>
            Salvage Item
          </button>
        </section>

        <!-- Filters -->
        <section class="kh-filters" style="margin-bottom: 1.5rem;">
          <input class="kh-input" id="inventory-search" type="text" placeholder="Search items..." style="max-width: 240px;" />
          <select class="kh-select" id="inventory-filter-status">
            <option value="">All Statuses</option>
            <option value="Available" selected>Available</option>
            <option value="Claimed">Claimed</option>
          </select>
          <select class="kh-select" id="inventory-filter-category">
            <option value="">All Categories</option>
            <option>Tile</option>
            <option>Lumber</option>
            <option>Hardware</option>
            <option>Plumbing</option>
            <option>Electrical</option>
            <option>Paint</option>
            <option>Flooring</option>
            <option>Roofing</option>
            <option>Insulation</option>
            <option>Drywall</option>
            <option>Fixtures</option>
            <option>Appliances</option>
            <option>Other</option>
          </select>
          <div class="kh-view-toggle">
            <button class="kh-view-toggle__btn is-active" id="inventory-view-grid" title="Grid view">
              <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><rect x="1" y="1" width="6" height="6" rx="1"/><rect x="9" y="1" width="6" height="6" rx="1"/><rect x="1" y="9" width="6" height="6" rx="1"/><rect x="9" y="9" width="6" height="6" rx="1"/></svg>
            </button>
            <button class="kh-view-toggle__btn" id="inventory-view-list" title="List view">
              <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><rect x="1" y="2" width="14" height="2.5" rx="1"/><rect x="1" y="6.75" width="14" height="2.5" rx="1"/><rect x="1" y="11.5" width="14" height="2.5" rx="1"/></svg>
            </button>
          </div>
        </section>

        <div class="kh-form-message" id="inventory-message"></div>

        <!-- Grid / List content -->
        <section id="inventory-content"></section>
      </div>
    </main>

    <footer class="kh-footer" id="page-footer">
      <div class="kh-container kh-footer__inner">
        <div>Copyright &copy; 2026 Kelli Homes - All Rights Reserved.</div>
        <div>Private job management area &middot; Not for public distribution.</div>
      </div>
    </footer>

    <!-- Add/Edit Item Modal -->
    <div class="kh-modal" id="inventory-modal" hidden>
      <div class="kh-modal__overlay"></div>
      <div class="kh-modal__content">
        <div class="kh-modal__header">
          <h3 id="inventory-modal-title">Add Item</h3>
          <button class="kh-modal__close" id="close-inventory-modal">&times;</button>
        </div>
        <div class="kh-modal__body">
          <form id="inventory-form">
            <input type="hidden" id="inventory-form-id" />
            <div class="kh-form-grid">
              <label class="kh-field" style="grid-column: 1 / -1;">
                <span>Name *</span>
                <input class="kh-input" id="inventory-form-name" name="name" required />
              </label>
              <label class="kh-field">
                <span>Quantity</span>
                <input class="kh-input" id="inventory-form-quantity" name="quantity" type="number" min="1" value="1" />
              </label>
              <label class="kh-field">
                <span>Category</span>
                <select class="kh-input" id="inventory-form-category" name="category">
                  <option>Tile</option>
                  <option>Lumber</option>
                  <option>Hardware</option>
                  <option>Plumbing</option>
                  <option>Electrical</option>
                  <option>Paint</option>
                  <option>Flooring</option>
                  <option>Roofing</option>
                  <option>Insulation</option>
                  <option>Drywall</option>
                  <option>Fixtures</option>
                  <option>Appliances</option>
                  <option selected>Other</option>
                </select>
              </label>
              <label class="kh-field" style="grid-column: 1 / -1;">
                <span>Source Job (where it came from)</span>
                <select class="kh-input" id="inventory-form-source-job" name="sourceJobId">
                  <option value="">None</option>
                </select>
              </label>
              <label class="kh-field" style="grid-column: 1 / -1;">
                <span>Description</span>
                <textarea class="kh-input" id="inventory-form-description" name="description" rows="2"></textarea>
              </label>
              <label class="kh-field" style="grid-column: 1 / -1;">
                <span>Notes</span>
                <textarea class="kh-input" id="inventory-form-notes" name="notes" rows="2"></textarea>
              </label>
              <label class="kh-field" style="grid-column: 1 / -1;">
                <span>Photo</span>
                <input class="kh-input" id="inventory-form-photo" name="photo" type="file" accept="image/*" />
                <div id="inventory-form-photo-preview" style="margin-top: 8px;"></div>
              </label>
            </div>
            <div class="kh-form-actions" style="margin-top: 1.5rem;">
              <button class="kh-button" type="submit" id="inventory-form-submit">Add Item</button>
              <button class="kh-button kh-button--secondary" type="button" id="cancel-inventory-modal">Cancel</button>
              <div class="kh-form-message" id="inventory-form-message"></div>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Claim Modal -->
    <div class="kh-modal" id="claim-modal" hidden>
      <div class="kh-modal__overlay"></div>
      <div class="kh-modal__content" style="max-width: 420px;">
        <div class="kh-modal__header">
          <h3 id="claim-modal-title">Claim Item</h3>
          <button class="kh-modal__close" id="close-claim-modal">&times;</button>
        </div>
        <div class="kh-modal__body">
          <form id="claim-form">
            <input type="hidden" id="claim-form-item-id" />
            <p id="claim-item-name" style="margin-bottom: 1rem; font-weight: 500;"></p>
            <label class="kh-field">
              <span>Destination Job *</span>
              <select class="kh-input" id="claim-form-job" name="destinationJobId" required>
                <option value="">Select a job...</option>
              </select>
            </label>
            <div class="kh-form-actions" style="margin-top: 1.5rem;">
              <button class="kh-button" type="submit" id="claim-form-submit">Claim</button>
              <button class="kh-button kh-button--secondary" type="button" id="cancel-claim-modal">Cancel</button>
              <div class="kh-form-message" id="claim-form-message"></div>
            </div>
          </form>
        </div>
      </div>
    </div>

    <nav class="kh-bottom-nav" aria-label="Mobile navigation">
      <a href="index.html#calendar-panel" class="kh-bottom-nav__item" data-nav="calendar">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
        <span>Calendar</span>
      </a>
      <a href="tasks.html" class="kh-bottom-nav__item" data-nav="tasks">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 11l3 3L22 4"/><path d="M21 12v7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h11"/></svg>
        <span>Tasks</span>
      </a>
      <a href="wasteland.html" class="kh-bottom-nav__item" data-nav="wasteland">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="7" width="9" height="10" rx="1"/><rect x="13" y="3" width="9" height="14" rx="1"/><line x1="6" y1="7" x2="6" y2="17"/><line x1="17" y1="3" x2="17" y2="17"/><line x1="2" y1="12" x2="11" y2="12"/></svg>
        <span>Wasteland</span>
      </a>
    </nav>

    <script src="config.js"></script>
    <script type="module" src="api.js"></script>
    <script type="module" src="main.js"></script>
  </body>
</html>
